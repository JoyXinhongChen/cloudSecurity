<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Affine Cipher: Encryption-Decryption</title>
</head>
<style typle="text/css">
.solid{
    border-style: solid;
}
</style>

<script>
     function encrypt(){
        var plaintext = document.getElementById("Input1").value;
            plaintext = plaintext.toLowerCase();
        var k1 = document.getElementById("Input2").value;
            k1=parseInt(k1);
        var k2 = document.getElementById("Input3").value;
            k2=parseInt(k2);
        var word,num,word2="";
        if(k1<26&&isNaN(k1)==false&&k1%2!=0&&k1!=13&&k2>=0&&k2<=25){
            for(var i=0;i<plaintext.length;i++){
                word=plaintext[i].charCodeAt()-97;
                num=(k1*word+k2)%26;
                word2+=String.fromCharCode(num +97);
            }
            document.getElementById("output1").value=word2;
            }
        else{
            alert("Wrong input!");
        }
    }

    function decrypt(){
        var ciphertext = document.getElementById("Input4").value;
            ciphertext = ciphertext.toLowerCase();
        var k_1 = parseInt(document.getElementById("Input5").value);
        var k_2 = parseInt(document.getElementById("Input6").value);
        if(!isNaN(k_1) && k_1<26 && k_1%2!=0 && k_1!=13&&k_2>=0&&k_2<=25){
            var result ="";
            for(var i=0;i<ciphertext.length;i++){
                var order_j=ciphertext.charCodeAt(i)-97;
                decrypted_order=decryption(k_1,k_2,order_j);
                var decrypted_word=String.fromCharCode(decrypted_order +97);
                result+=decrypted_word+"";
            }
            document.getElementById("output2").value=result;
        }else{
            alert("Wrong input!");
        }
    }
    function getInversedNumber(k1){
        var inversedNo=1;
        while(k1*inversedNo%26!=1){
            inversedNo++;
        }
        return inversedNo;
    }
    function decryption(k1,k2,c){
        var result=mod((getInversedNumber(k1)*(c-k2)),26);
        return result;
    }

    function mod(n, m) {
    var remain = n % m;
    return Math.floor(remain >= 0 ? remain : remain + m);
    }


</script>
<body>
    <h1>Affine Cipher:Encryption-Decryption</h1>
    <div class="solid"> 
            <label for="Input1">Plaintext:</label>
            <textarea name="Input1" id="Input1" cols="10" rows="10"></textarea><br>
            <label for="Input2">k_1:</label>
            <input id="Input2" type="text"><br>
            <label for="Input3">k_2:</label>
            <input id="Input3" type="text"><br>
            <button type="submit" onclick="encrypt()">Encrypt</button><br>
            <label for="output1">Ciphertext:</label>
            <textarea name="output1" id="output1" cols="10" rows="10"></textarea>
    </div>

<hr>
<div class="solid">
        <label for="Input4">Ciphertext:</label>
        <textarea name="Input4" id="Input4" cols="10" rows="10"></textarea><br>
        <label for="Input5">k_1:</label>
        <input id="Input5" type="text"><br>
        <label for="Input6">k_2:</label>
        <input id="Input6" type="text"><br>
        <button type="submit" onclick="decrypt()">decrypt</button><br>
        <label for="output2">Ciphertext:</label>
        <textarea name="output2" id="output2" cols="10" rows="10"></textarea>
</div>

</body>
</html>